   <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>欢迎来到Farlight官方网站</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            background: #000;
        }

        /* 宇宙星空背景 */
        body:before {
            content: "";
            position: absolute;
            width: 150%;
            height: 150%;
            top: -25%;
            left: -25%;
            z-index: -1;
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 4px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 4px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 130px 270px;
            animation: starMove 15s linear infinite;
        }

        @keyframes starMove {
            0% {
                transform: translateZ(0);
            }
            100% {
                transform: translateZ(0) translateY(10%) translateX(-5%);
            }
        }

        /* 移除星光闪烁效果 */
        body:after {
            display: none;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: moveStar linear infinite;
        }

        @keyframes moveStar {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-20vh) translateX(20vw);
                opacity: 0;
            }
        }

        .container {
            text-align: center;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            position: relative;
            display: inline-block;
            color: white;
            padding: 10px 20px;
            transition: all 0.3s ease;
        }

        h1::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #3f5efb, #8a3cfd, #5c33cd);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.5s ease;
            border-radius: 5px;
        }

        h1:hover::before {
            opacity: 1;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes glow {
            0% { text-shadow: 0 0 10px rgba(76, 175, 80, 0.5); }
            50% { text-shadow: 0 0 20px rgba(76, 175, 80, 0.8), 0 0 30px rgba(76, 175, 80, 0.6); }
            100% { text-shadow: 0 0 10px rgba(76, 175, 80, 0.5); }
        }

        .nav-buttons {
            display: flex;
            flex-direction: row;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 800px;
            margin: 0 auto;
        }

        .nav-button {
            background: rgba(38, 38, 38, 0.9);
            color: white;
            padding: 20px 40px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 1.2em;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            border: 2px solid #555;
            min-width: 200px;
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 0 #222;
            transform: translateY(0);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            overflow: visible;
            z-index: 10;
        }

        .nav-button:hover {
            background: rgba(50, 50, 50, 1);
            transform: translateY(-3px);
            box-shadow: 0 8px 0 #222;
            border-color: #777;
        }

        .nav-button:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #222;
            transition: all 0.1s ease;
        }

        .nav-button::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: linear-gradient(225deg, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
            z-index: 2;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 5px;
            bottom: 0;
            left: 0;
            background: linear-gradient(to right, #3f5efb, #8a3cfd, #5c33cd);
            z-index: 2;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .nav-button:hover::before {
            transform: scaleX(1);
        }
        
        /* 按钮悬停时的闪光效果 */
        .nav-button span {
            position: relative;
            z-index: 3;
        }
        
        .nav-button:hover::after {
            animation: button-shine 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes button-shine {
            0% {
                opacity: 0.5;
                background-position: -50% -50%;
            }
            100% {
                opacity: 1;
                background-position: 150% 150%;
            }
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: rgba(30, 30, 30, 0.95);
            border-radius: 0 0 10px 10px;
            padding: 10px 0;
            margin-top: 10px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 9;
            transform: translateY(-10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border-left: 2px solid #3f5efb;
            border-right: 2px solid #5c33cd;
            border-bottom: 2px solid #8a3cfd;
            pointer-events: none;
        }

        .nav-button:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            pointer-events: auto;
        }

        .dropdown-menu a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 12px 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dropdown-menu a:hover {
            background: rgba(63, 94, 251, 0.2);
            padding-left: 25px;
        }

        .dropdown-menu a::after {
            content: '';
            position: absolute;
            height: 100%;
            width: 3px;
            background: linear-gradient(to bottom, #3f5efb, #8a3cfd);
            left: 0;
            top: 0;
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.3s ease;
        }

        .dropdown-menu a:hover::after {
            transform: scaleY(1);
        }

        .dropdown-menu .qq-info {
            padding: 10px 20px;
            color: #8a3cfd;
            font-weight: bold;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 5px;
            text-shadow: 0 0 5px rgba(138, 60, 253, 0.5);
        }

        .server-info {
            margin-top: 40px;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            font-size: 0.9em;
        }

        .server-ip {
            color: #4CAF50;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .server-ip:hover {
            color: #fff;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .server-status {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .status-dot.offline {
            background: #f44336;
            animation: none;
        }

        .server-motd {
            color: #4CAF50;
            font-style: italic;
            margin-top: 5px;
            text-align: center;
        }

        .copy-success {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }

        /* 弹窗样式 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(44, 44, 44, 0.95);
            padding: 20px;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .close {
            position: absolute;
            right: 20px;
            top: 10px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #fff;
        }

        .announcement-list {
            text-align: left;
            margin-top: 20px;
        }

        .announcement-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .announcement-item:hover {
            background: rgba(76, 175, 80, 0.2);
        }

        .announcement-title {
            color: #4CAF50;
            margin-bottom: 5px;
        }

        .announcement-date {
            font-size: 0.8em;
            color: #888;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-count {
            color: #4CAF50;
            font-size: 0.9em;
        }

        .view-count i {
            margin-right: 5px;
        }

        .detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
        }

        .detail-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(32, 34, 37, 0.98);
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            overflow-y: auto;
            color: #e3e3e3;
            line-height: 1.6;
        }

        .detail-content h2 {
            color: #4CAF50;
            margin-bottom: 20px;
            font-size: 1.8em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .detail-content p {
            margin: 15px 0;
            line-height: 1.8;
            font-size: 1.1em;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .detail-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            display: block;
        }

        .detail-content .image-container {
            margin: 20px 0;
        }

        .detail-content .image-container img {
            width: 100%;
            margin: 20px 0;
        }

        /* 自定义滚动条样式 */
        .detail-content::-webkit-scrollbar {
            width: 8px;
        }

        .detail-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .detail-content::-webkit-scrollbar-thumb {
            background: rgba(76, 175, 80, 0.5);
            border-radius: 4px;
        }

        .detail-content::-webkit-scrollbar-thumb:hover {
            background: rgba(76, 175, 80, 0.7);
        }

        @media (max-width: 768px) {
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-button {
                width: 100%;
                padding: 15px 20px;
            }

            .modal-content, .detail-content {
                width: 95%;
            }
        }

        /* 添加复制提示的样式 */
        .copy-hint {
            font-size: 0.8em;
            color: #888;
            margin-left: 5px;
            font-style: italic;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <h1>Farlight</h1>
        
        <div class="nav-buttons">
            <div class="nav-button">
                <span>下载推荐客户端版本</span>
                <div class="dropdown-menu">
                    <a href="https://pan.quark.cn/s/8461f4ce173a#/list/share" download>1.21.1</a>
                    <a href="https://pan.quark.cn/s/fd328ad9b2c1#/list/share" download>1.21.3</a>
                    
                </div>
            </div>
            
            <div class="nav-button" onclick="openGuide()">
                <span>新手指南</span>
            </div>

            <div class="nav-button">
                <span>主官网</span>
                <div class="dropdown-menu">
                    <a href="https://www.sfatop.cn/" download>Farlight</a>
                </div>
                </div>

            <div class="nav-button">
                <span>加入QQ群</span>
                <div class="dropdown-menu">
                    <a href="https://qm.qq.com/cgi-bin/qm/qr?k=hwtH_x5jdM7JsSCnUqax0qDJXfi_lq-2&jump_from=webapi&authKey=+7bycQKmE8wUB7S1zeGt3aibk8R5PRON5ZE0s0F052U2hflzv1GQc7BSHb4mC+Jx" target="_blank">点击加入群聊【
Minecraft Farlight [开荒阶段]】</a>
                    <div class="qq-info">添加服主QQ：1719395375</div>
                </div>
            </div>
        </div>

        <div class="server-info">
            <p>服务器地址: <span class="server-ip" onclick="copyToClipboard('farlight.xsmp.top')">farlight.xsmp.top</span> <span class="copy-hint">(点击自动复制IP)</span></p>
            <div class="server-status">
                <div class="status-item">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="playerCount">加载中...</span>
                </div>
                <div class="server-motd" id="serverMotd"></div>
            </div>
        </div>
        <div class="copy-success" id="copySuccess">服务器地址已复制到剪贴板！</div>
    </div>

    <!-- 新手指南弹窗 -->
    <div id="guideModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeGuide()">&times;</span>
            <h2>新手指南</h2>
            <div class="announcement-list">
                <div class="announcement-item" onclick="showDetail('maintenance')">
                    <div class="announcement-title">通知：维护通知</div>
                    <div class="announcement-date">
                        <span>2024-03-20</span>
                        <span class="view-count"><i class="fas fa-eye"></i>观看：<span id="view-maintenance">0</span>次</span>
                    </div>
                </div>
                <div class="announcement-item" onclick="showDetail('land')">
                    <div class="announcement-title">教程：不会圈地的玩家看过来</div>
                    <div class="announcement-date">
                        <span>2024-03-19</span>
                        <span class="view-count"><i class="fas fa-eye"></i>观看：<span id="view-land">0</span>次</span>
                    </div>
                </div>
                <div class="announcement-item" onclick="showDetail('economy')">
                    <div class="announcement-title">攻略：服务器经济系统详解</div>
                    <div class="announcement-date">
                        <span>2024-03-18</span>
                        <span class="view-count"><i class="fas fa-eye"></i>观看：<span id="view-economy">0</span>次</span>
                    </div>
                </div>
                <div class="announcement-item" onclick="showDetail('pvp')">
                    <div class="announcement-title">活动：PVP</div>
                    <div class="announcement-date">
                        <span>2024-03-17</span>
                        <span class="view-count"><i class="fas fa-eye"></i>观看：<span id="view-pvp">0</span>次</span>
                    </div>
                </div>
                <div class="announcement-item" onclick="showDetail('build')">
                    <div class="announcement-title">活动：建筑大赛</div>
                    <div class="announcement-date">
                        <span>2024-03-16</span>
                        <span class="view-count"><i class="fas fa-eye"></i>观看：<span id="view-build">0</span>次</span>
                    </div>
                </div>
                <div class="announcement-item" onclick="showDetail('rules')">
                    <div class="announcement-title">重要：服务器规则更新</div>
                    <div class="announcement-date">
                        <span>2024-03-15</span>
                        <span class="view-count"><i class="fas fa-eye"></i>观看：<span id="view-rules">0</span>次</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 详细内容弹窗 -->
    <div id="detailModal" class="detail-modal">
        <div class="detail-content">
            <span class="close" onclick="closeDetail()">&times;</span>
            <div id="detailContent"></div>
        </div>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const copySuccess = document.getElementById('copySuccess');
                copySuccess.style.display = 'block';
                setTimeout(() => {
                    copySuccess.style.display = 'none';
                }, 2000);
            });
        }

        function openGuide() {
            document.getElementById('guideModal').style.display = 'block';
        }

        function closeGuide() {
            document.getElementById('guideModal').style.display = 'none';
        }

        // 创建星星背景
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 200;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // 随机大小
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // 随机位置
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // 随机动画持续时间
                const duration = 3 + Math.random() * 7;
                star.style.animationDuration = `${duration}s`;
                
                // 随机延迟
                const delay = Math.random() * 5;
                star.style.animationDelay = `${delay}s`;
                
                starsContainer.appendChild(star);
            }
        }

        // 页面加载时初始化
        window.onload = async function() {
            // 创建星星背景
            createStars();

            try {
                // 1. 使用本地存储缓存浏览次数
                const cachedCounts = localStorage.getItem('viewCounts');
                if (cachedCounts) {
                    const counts = JSON.parse(cachedCounts);
                    Object.keys(counts).forEach(type => {
                        viewCounts[type] = counts[type];
                        document.getElementById(`view-${type}`).textContent = counts[type];
                    });
                }

                // 2. 异步更新浏览次数（不阻塞页面显示）
                setTimeout(async () => {
                    await Promise.all([
                        'maintenance', 'land', 'economy', 'pvp', 'build', 'rules'
                    ].map(async type => {
                        try {
                            const response = await fetch(`?type=${type}`);
                            const data = await response.json();
                            if (data.count !== undefined) {
                                viewCounts[type] = data.count;
                                document.getElementById(`view-${type}`).textContent = data.count;
                            }
                        } catch (error) {
                            console.error(`获取${type}浏览次数失败:`, error);
                        }
                    }));
                    // 更新本地存储
                    localStorage.setItem('viewCounts', JSON.stringify(viewCounts));
                }, 100);

                // 3. 显示初始状态
                const statusDot = document.getElementById('statusDot');
                const playerCount = document.getElementById('playerCount');
                const serverMotd = document.getElementById('serverMotd');
                
                statusDot.classList.add('offline');
                playerCount.textContent = '服务器信息将在30秒后自动获取...';
                serverMotd.textContent = '';

                // 4. 30秒后初始化服务器状态获取功能
                setTimeout(() => {
                    // 定义服务器状态更新函数
                    async function updateServerStatus() {
                        try {
                            // 使用更可靠的API和服务器地址
                            const response = await fetch('https://api.mcsrvstat.us/2/farlight.xsmp.top');
                            if (!response.ok) {
                                throw new Error('API 响应错误');
                            }
                            
                            const data = await response.json();
                            console.log('获取到服务器状态:', data); // 调试信息
                            updateStatusDisplay(data);
                        } catch (error) {
                            console.error('获取服务器状态失败:', error);
                            fallbackServerStatus();
                        }
                    }

                    // 定义状态显示更新函数
                    function updateStatusDisplay(data) {
                        const statusDot = document.getElementById('statusDot');
                        const playerCount = document.getElementById('playerCount');
                        const serverMotd = document.getElementById('serverMotd');
                        
                        if (data.online) {
                            statusDot.classList.remove('offline');
                            playerCount.textContent = `在线人数: ${data.players.online}/${data.players.max}`;
                            
                            // 处理MOTD不同格式的情况
                            if (data.motd) {
                                // mcsrvstat.us API格式
                                if (data.motd.html) {
                                    serverMotd.innerHTML = Array.isArray(data.motd.html) ? data.motd.html.join('') : data.motd.html;
                                } 
                                // mcapi.us API格式
                                else if (typeof data.motd === 'string') {
                                    serverMotd.textContent = data.motd;
                                }
                                // 数组格式
                                else if (Array.isArray(data.motd)) {
                                    serverMotd.innerHTML = data.motd.join('<br>');
                                }
                                // 如果有clean格式就使用它
                                else if (data.motd.clean) {
                                    serverMotd.innerHTML = Array.isArray(data.motd.clean) ? data.motd.clean.join('<br>') : data.motd.clean;
                                }
                                // 其他情况
                                else {
                                    serverMotd.textContent = JSON.stringify(data.motd).substring(0, 100);
                                }
                            } else {
                                serverMotd.textContent = ''; 
                            }
                        } else {
                            statusDot.classList.add('offline');
                            playerCount.textContent = '服务器当前离线';
                            serverMotd.textContent = '';
                        }
                    }

                    // 备用获取方法
                    async function fallbackServerStatus() {
                        try {
                            // 尝试使用备用API
                            const response = await fetch('https://mcapi.us/server/status?ip=farlight.xsmp.top');
                            if (!response.ok) {
                                throw new Error('备用API响应错误');
                            }
                            
                            const data = await response.json();
                            console.log('通过备用API获取服务器状态:', data); // 调试信息
                            
                            // 转换备用API数据格式
                            const formattedData = {
                                online: data.online || false,
                                players: {
                                    online: data.players?.now || 0,
                                    max: data.players?.max || 0
                                },
                                version: data.server?.name || '',
                                motd: data.motd || ''
                            };
                            
                            updateStatusDisplay(formattedData);
                        } catch (error) {
                            console.error('备用API获取失败:', error);
                            
                            // 再尝试另一个备用API
                            try {
                                const response = await fetch('https://api.minetools.eu/ping/farlight.xsmp.top');
                                if (!response.ok) {
                                    throw new Error('备用API 2响应错误');
                                }
                                
                                const data = await response.json();
                                console.log('通过备用API 2获取服务器状态:', data); // 调试信息
                                
                                const formattedData = {
                                    online: data.error ? false : true,
                                    players: {
                                        online: data.players?.online || 0,
                                        max: data.players?.max || 0
                                    },
                                    version: data.version?.name || '',
                                    motd: data.description || ''
                                };
                                
                                updateStatusDisplay(formattedData);
                            } catch (finalError) {
                                console.error('所有API获取失败:', finalError);
                                const playerCount = document.getElementById('playerCount');
                                playerCount.textContent = '如果获取失败就等等会自动刷新重新获取';
                            }
                        }
                    }

                    // 开始获取服务器状态
                    updateServerStatus();
                    // 设置定期更新
                    setInterval(updateServerStatus, 60000);
                }, 30000);
            } catch (error) {
                console.error('初始化失败:', error);
            }
        }

        // 存储当前浏览次数
        let viewCounts = {
            maintenance: 0,
            land: 0,
            economy: 0,
            pvp: 0,
            build: 0,
            rules: 0
        };

        // 获取浏览次数
        async function getViewCount(type) {
            try {
                const response = await fetch(`?type=${type}`);
                const data = await response.json();
                if (data.count !== undefined) {
                    viewCounts[type] = data.count;
                    document.getElementById(`view-${type}`).textContent = data.count;
                }
            } catch (error) {
                console.error('获取浏览次数失败:', error);
            }
        }

        // 增加浏览次数
        async function incrementViewCount(type) {
            // 立即更新显示
            viewCounts[type]++;
            document.getElementById(`view-${type}`).textContent = viewCounts[type];
            
            // 异步更新服务器
            try {
                const response = await fetch(`?type=${type}&action=increment`);
                const data = await response.json();
                if (data.count !== undefined) {
                    viewCounts[type] = data.count;
                    document.getElementById(`view-${type}`).textContent = data.count;
                }
            } catch (error) {
                console.error('更新浏览次数失败:', error);
            }
        }

        function showDetail(type) {
            incrementViewCount(type);
            const detailContent = document.getElementById('detailContent');
            let content = '';
            
            switch(type) {
                case 'maintenance':
                    content = `
                        <h2>服务器维护通知</h2>
                        <p>亲爱的玩家们：</p>
                        <p>我们将在2025年5月16日进行全服维护，具体安排如下：</p>
                        <p>维护时间：2025年5月16日 19:30 - 19:15</p>
                        <p>维护内容：</p>
                        <p>1. 服务器版本升级</p>
                        <p>2. 反作弊插件替换</p>
                        <p>维护期间服务器将无法访问，请提前做好准备。</p>
                        <div class="image-container">
                            <img src="images/2024.jpg" alt="服务器维护">
                            <img src="images/KLpEBOLev5.png" alt="系统升级">
                        </div>
                    `;
                    break;
                case 'land':
                    content = `
                        <h2>圈地教程</h2>
                        <p>圈地命令使用教程：</p>
                        <p>1. 使用木斧选择两个点</p>
                        <p>2. 输入 /res create 领地名称</p>
                        <p>3. 设置权限：/res set 权限名称 true/false</p>
                        <p>详细权限说明：</p>
                        <p>- build: 建造权限</p>
                        <p>- destroy: 破坏权限</p>
                        <p>- use: 使用权限</p>
                        <div class="image-container">
                            <img src="images/hjj.png" alt="圈地教程">
                            <img src="images/hmtj.png" alt="领地管理">
                        </div>
                    `;
                    break;
                case 'economy':
                    content = `
                        <h2>经济系统详解</h2>
                        <p>服务器经济系统说明：</p>
                        <p>1. 货币获取方式</p>
                        <p>2. 商店系统使用</p>
                        <p>3. 交易系统说明</p>
                        <p>4. 经济插件命令</p>
                        <div class="image-container">
                            <img src="images/coins1.png" alt="经济系统">
                            <img src="images/coins2.png" alt="货币系统">
                            <img src="images/coins3.png" alt="交易系统">
                        </div>
                    `;
                    break;
                case 'pvp':
                    content = `
                        <h2>PVP竞技场开放</h2>
                        <p>PVP竞技场现已开放！</p>
                        <p>开放时间：每日 14:00-22:00</p>
                        <p>参与方式：/pvp join</p>
                        <p>奖励机制：</p>
                        <p>1. 每日排名奖励</p>
                        <p>2. 周赛奖励</p>
                        <p>3. 月赛奖励</p>
                        <div class="image-container">
                            <img src="images/stone_sword_i.png" alt="PVP武器">
                            <img src="images/hstj.png" alt="竞技场">
                        </div>
                    `;
                    break;
                case 'build':
                    content = `
                        <h2>建筑大赛报名</h2>
                        <p>服务器建筑大赛开始报名！</p>
                        <p>报名时间：即日起至2024年4月1日</p>
                        <p>比赛时间：2024年4月15日-4月30日</p>
                        <p>报名方式：/build join</p>
                        <p>奖励设置：</p>
                        <p>1. 一等奖：10000游戏币</p>
                        <p>2. 二等奖：5000游戏币</p>
                        <p>3. 三等奖：2000游戏币</p>
                        <div class="image-container">
                            <img src="images/hzsj.png" alt="建筑展示">
                            <img src="images/coins4.png" alt="奖励展示">
                            <img src="images/coins5.png" alt="奖品展示">
                        </div>
                    `;
                    break;
                case 'rules':
                    content = `
                        <h2>服务器规则更新</h2>
                        <p>服务器规则已更新，请所有玩家注意：</p>
                        <p>1. 禁止使用任何作弊模组</p>
                        <p>2. 禁止恶意破坏他人建筑</p>
                        <p>3. 禁止在公共区域乱丢垃圾</p>
                        <p>4. 禁止恶意PVP</p>
                        <p>5. 禁止使用任何外挂程序</p>
                        <p>违反规则将受到相应处罚，请玩家自觉遵守。</p>
                        <div class="image-container">
                            <img src="images/exp.png" alt="规则说明">
                            <img src="images/logo.jpg" alt="服务器标志">
                        </div>
                    `;
                    break;
            }
            
            detailContent.innerHTML = content;
            document.getElementById('detailModal').style.display = 'block';
        }

        function closeDetail() {
            document.getElementById('detailModal').style.display = 'none';
        }

        // 点击弹窗外部关闭弹窗
        window.onclick = function(event) {
            const guideModal = document.getElementById('guideModal');
            const detailModal = document.getElementById('detailModal');
            if (event.target == guideModal) {
                guideModal.style.display = 'none';
            }
            if (event.target == detailModal) {
                detailModal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
